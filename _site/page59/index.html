<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Singularity.be &middot; Flawed logic inspecting flawed logic
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Singularity.be
        </a>
      </h1>
      <p class="lead">Steven Van Acker's blog</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
          
        
      
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/projects/">Projects</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/publications/">Publications</a>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
    </nav>

    <!-- <p>&copy; 2016. All rights reserved.</p> -->
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2007/03/29/new-desktop-phase-2-versioned-backup/">
        new desktop: phase 2 - versioned backup
      </a>
    </h1>

    <span class="post-date">29 Mar 2007</span>

    I've been looking at several ways of doing versioned backup these last couple days. Remember, I want to put entire directories under automatic version-control so that all changes to files in those directories are recorded. Then I want to have a copy of this data on my server, which should sync automatically also.<br /><br />There is <a href='http://wayback.sourceforge.net/'>WayBack</a>, which describes itself as "User-level Versioning File System for Linux". The nice thing about this, is that it's based on FUSE (userspace filesystem). The sad thing is that it's no longer maintained :(<br /><br />I couldn't find anything to fit my purpose, so I guess I'll have to build my own, using prebuilt components.<br /><br />I basically want to have a local versioning system (fully inside my encrypted homedirectory) and sync that to my server from time to time.<br /><br />There are a couple of versioning systems around. The most famous is no doubt <a href='http://subversion.tigris.org/'>Subversion</a>. Then there is <a href='http://www.nongnu.org/cvs/'>CVS</a>, which is a predecessor of Subversion. CVS works on files instead of directories. There is also <a href='http://svk.bestpractical.com/view/HomePage'>SVK</a>, which is built on top of Subversion. It's advantage over Subversion (SVN) is that it doesn't have .svn directories all over the place which pollute filesystems. But it's documentation leaves alot to be desired...<br /><a href='http://www.gnu.org/software/rcs/rcs.html'>RCS</a> should also be mentioned, because it's great to do versioning on files without having to do complicated networked setups. RCS just works locally and does a very good job.<br /><br />On top of that, there are also: <a href='http://bazaar-vcs.org/'>BZR (bazaar-ng)</a> which claims to be able to track renamed files and directories, Cogito, CVSNT, MCVS, Mercurial, Monotone and PRCS. <br /><br />Besides the first 4, none of those ring a bell.<br /><br />At this particular instant, I'm looking at Bazaar-ng and I'm impressed by passages like this:<br /><pre><br />We believe that the revision control system should not impose <br />arbitrary restrictions on your project. In other words, your <br />community should be able to treat your tree as entirely malleable, <br />reshaping it to improve clarity and structure of the code layout as <br />much as the contents of the files that make up the tree.<br /></pre><br /><br />That's how I like things :) I don't want a system to impose limits on me. If the system can't cope with my odd and insane behaviour, then I need something else.<br /><br />Also<br /><pre><br />Bazaar is a free software project with a large community of <br />contributors, sponsored by Canonical Limited, the founders of Ubuntu <br />and Launchpad.<br /></pre><br /><br />If Canonical supports it, then I'm sure it will integrate well with Ubuntu.<br /><br />[A quick test later]<br />I'm very impressed with bzr. It's usage is so simple, and it allows me to automatically track all new files in a directory so it will be easy to do auto-checkin.<br /><br />Apparently, I can just rsync the entire working copy to a server, and things will just work. The bzr people advise to use bzr push though, which is fine by me :)<br /><br />I'll be working on a script to automatically commit my changes. More on this later.<br /><br />[Some tests later]<br /><br />My current setup looks like this: on the local machine I have a file called .bzr-dirlist, which contains a list of directories under revision control (like Documents and Projects).<br /><br />The script then looks like this:<br /><pre><br />#!/bin/bash<br /><br />dirlist=$HOME/.bzr-dirlist<br /><br />cd $HOME<br /><br />for dir in `cat $dirlist`;<br />do<br />        bzr add $dir<br />done<br /><br />bzr commit --message "Auto-commit `whoami`@`hostname` on `date`"<br /><br /></pre><br /><br />This script will examine the new files in the directories and commit them to bzr.<br /><br />Next, I need to mirror these directories to a remote server.<br />Just using push isn't enough because that won't "checkout" the files.<br />There is a plugin that does a push and an update, called <a href='https://launchpad.net/bzr-push-and-update/'>"push-and-update"</a><br /><br />I can install it by doing:<br /><pre><br />guest@deepstar-desktop:~/.bazaar$ mkdir plugins<br />guest@deepstar-desktop:~/.bazaar$ cd plugins/<br />guest@deepstar-desktop:~/.bazaar/plugins$ <br />guest@deepstar-desktop:~/.bazaar/plugins$ bzr branch https://launchpad.net/bzr-push-and-update push_and_update<br /></pre><br /><br />The plugin even provides hooks for bash_completion, which is a plus for me :)<br /><br />This command will push and update the files:<br /><pre><br />guest@deepstar-desktop:~$ bzr push-and-update sftp://guestbackup@localhost/home/guestbackup/something<br /></pre><br /><br />But before doing that, the directory must be created and initialised on the remote server (with bzr init)<br /><br />I'll have to use SSH-keys to do all this without entering a password...<br /><br />[later]<br />The bazaar-ng developers also suggest putting this line in /etc/apt/sources.list to get the latest bzr packages:<br /><pre><br />deb http://bazaar-vcs.org/releases/debs/edgy ./<br /></pre><br />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2007/03/28/op-zoek-naar-toffe-dingen/">
        op zoek naar toffe dingen
      </a>
    </h1>

    <span class="post-date">28 Mar 2007</span>

    Het is zodanig goed weer dat ik sinds vandaag weer mijn zomerjas aandoe. Met zo'n weer zou ik wat willen gaan lopen, ware het niet dat mijn knie nog altijd pijn doet. Daarstraks ben ik langs de dokter geweest en die vreest dat het om mijn meniscus gaat. Dat zou willen zeggen dat ik er altijd last van zal hebben...<br /><br />Tijd om naar een andere sport uit te kijken ? Alvast nog niet. Morgen probeer ik een afspraak vast te krijgen bij een orthopedist zodat die er eens wat grondiger naar kan kijken.<br /><br />Ondertussen is het mooi weer dus doorgebroken en is iedereen die ik ken lustig bezig met feesten en toffe dingen doen. Ikzelf aan de andere kant spendeer teveel tijd thuis door. Zoals altijd ligt dat probleem meer bij mij dan bij iets anders. En ook zoals altijd moet ik terug eens dringend op zoek naar iets waar ik plezier in heb.<br /><br />Vorig jaar kreeg ik het aanbod om eens mee te gaan boogschieten in de buurt van Leuven en ik zie dat eigenlijk wel zitten. Ik moet mij ook eens inschrijven voor de cursussen automechanica en lassen volgend jaar. Daarnaast wil ik nu eens eindelijk wat gaan autorijden en ben ik op zoek naar een 2de begeleider (mijn huidige begeleider kan momenteel geen tijd vrijmaken).<br /><br />Misschien kan ik ook eens de streekkrant erbij nemen en kijken wat er zoal te doen is in Leuven. En het kan ook geen kwaad om mijn vakantie al te plannen. Ik wil dit jaar eens op reis naar het buitenland, waarschijnlijk een begeleide groepsreis want alleen op reis gaan is ook maar stom.
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2007/03/28/propere-keuken/">
        propere keuken ?
      </a>
    </h1>

    <span class="post-date">28 Mar 2007</span>

    Hier zijn wat foto's van onze keuken voor de mensen die zich niet kunnen voorstellen hoeveel 6 uur afwas is.<br /><br />Voor:<br />[G2:11170][G2:11174]<br />Na:<br />[G2:11180]<br /><br />En gisteren (dus de 3de dag na de "Na" foto") staat er weeral veel rommel. Foto misschien vanavond...
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2007/03/25/en-dan-wat-prentjes/">
        en dan wat prentjes
      </a>
    </h1>

    <span class="post-date">25 Mar 2007</span>

    Zo ziet het jaar eruit met zomeruur:<br />[G2:11163]<br /><br />Zwart wilt zeggen nacht, grijs is schemer, wit is daglicht.<br />Alles is opgesteld vanuit het perspectief van zomeruur.<br />De rode lijn geeft aan wanneer iemand opstaat en gaat slapen (7u en 23u)<br />De eerste lijn (horizontaal) is 1 januari 2007 en de tekening gaat helemaal tot 31 december 2007.<br /><br />Hier is dezelfde tekening, maar voor iemand die zomeruur negeert:<br />[G2:11166]<br /><br /><a href='/Trashcan/zomeruur.tar.gz'>Hier</a> zijn alle scripts en datafiles indien je zelf eens wil proberen. Ik speel hiervoor geen helpdesk ;)
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2007/03/25/zomeruur-erratum/">
        zomeruur erratum ?
      </a>
    </h1>

    <span class="post-date">25 Mar 2007</span>

    Nu ik wat minder groggy ben dan deze nacht om 5u(zomertijd!), heb ik nog eens nagedacht over mijn script omdat ik niet zeker ben dat ik de zomertijd op de gepaste manier negeer.<br /><br />De data die ik gebruik heeft uren waarop het zomeruur is toegepast. Bij 24 maart 2007 komt de zon op om 6:38 en om 25 maart 2007 om 7:35. Dat is bijna een uur verschil.<br /><br />Stel nu dat ik samen met iemand elke morgen om 6u opsta en dat de zon opkomt om 7u (allebei reele tijd). Stel ook dat ik kies om zomertijd te negeren en die andere niet.<br /><br />Op zaterdag 24 maart staan we allebei op om 6u en zitten samen 1u in het donker. Op zondag 25 maart sta ik op om 6u reele tijd en de andere om 5u reele tijd (want die heeft zijn klok 1u vooruit gedraaid en verliest een uur slaap).<br /><br />Vanuit zijn perspectief sta ik 1u later op, dus om 7u zomertijd.<br /><br />Hoe kan ik dat nu corrigeren ? De datatabel is opgesteld in zomertijd, dus vanuit het perspectief van die andere. Ik zie er dus uit als een luie slaapkop die 1u te lang slaapt. M.a.w., als ik de zomertijd negeer sta ik 1u later op in zomertijd.<br /><br />Dit stukje code:<br /><pre><br />    if($ignore_summertime and $list->{$i}->{summertime}) {<br />        $realwakeup = $wakeup - 3600;<br />        $realsleep  = $sleep  - 3600;<br /></pre><br /><br />Moet dus worden:<br /><pre><br />    if($ignore_summertime and $list->{$i}->{summertime}) {<br />        $realwakeup = $wakeup + 3600;<br />        $realsleep  = $sleep  + 3600;<br /></pre><br /><br />En geeft dan volgende data:<br /><br /><pre><br />04:00 - 20:00:  extra verbruik met zomeruur = 5 day(s), 22 hour(s), 34 min(s), 0 sec(s)<br />04:15 - 20:15:  extra verbruik met zomeruur = 5 day(s), 6 hour(s), 13 min(s), 0 sec(s)<br />04:30 - 20:30:  extra verbruik met zomeruur = 4 day(s), 12 hour(s), 59 min(s), 0 sec(s)<br />04:45 - 20:45:  extra verbruik met zomeruur = 3 day(s), 9 hour(s), 32 min(s), 0 sec(s)<br />05:00 - 21:00:  extra verbruik met zomeruur = 1 day(s), 20 hour(s), 2 min(s), 0 sec(s)<br />05:15 - 21:15:  uitgespaard verbruik met zomeruur = 0 day(s), 2 hour(s), 43 min(s), 0 sec(s)<br />05:30 - 21:30:  uitgespaard verbruik met zomeruur = 2 day(s), 1 hour(s), 18 min(s), 0 sec(s)<br />05:45 - 21:45:  uitgespaard verbruik met zomeruur = 3 day(s), 13 hour(s), 49 min(s), 0 sec(s)<br />06:00 - 22:00:  uitgespaard verbruik met zomeruur = 4 day(s), 16 hour(s), 27 min(s), 0 sec(s)<br />06:15 - 22:15:  uitgespaard verbruik met zomeruur = 5 day(s), 9 hour(s), 48 min(s), 0 sec(s)<br />06:30 - 22:30:  uitgespaard verbruik met zomeruur = 6 day(s), 2 hour(s), 38 min(s), 0 sec(s)<br />06:45 - 22:45:  uitgespaard verbruik met zomeruur = 6 day(s), 19 hour(s), 4 min(s), 0 sec(s)<br />07:00 - 23:00:  uitgespaard verbruik met zomeruur = 7 day(s), 9 hour(s), 41 min(s), 0 sec(s)<br />07:15 - 23:15:  uitgespaard verbruik met zomeruur = 7 day(s), 22 hour(s), 26 min(s), 0 sec(s)<br />07:30 - 23:30:  uitgespaard verbruik met zomeruur = 8 day(s), 9 hour(s), 13 min(s), 0 sec(s)<br />07:45 - 23:45:  uitgespaard verbruik met zomeruur = 8 day(s), 16 hour(s), 44 min(s), 0 sec(s)<br />08:00 - 00:00:  uitgespaard verbruik met zomeruur = 8 day(s), 21 hour(s), 45 min(s), 0 sec(s)<br />08:15 - 00:15:  uitgespaard verbruik met zomeruur = 9 day(s), 0 hour(s), 27 min(s), 0 sec(s)<br />08:30 - 00:30:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br />08:45 - 00:45:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br />09:00 - 01:00:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br />09:15 - 01:15:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br />09:30 - 01:30:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br />09:45 - 01:45:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br />10:00 - 02:00:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br />10:15 - 02:15:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br />10:30 - 02:30:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br />10:45 - 02:45:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br />11:00 - 03:00:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br />11:15 - 03:15:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br />11:30 - 03:30:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br />11:45 - 03:45:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br />12:00 - 04:00:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br />12:15 - 04:15:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br />12:30 - 04:30:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br />12:45 - 04:45:  uitgespaard verbruik met zomeruur = 9 day(s), 1 hour(s), 0 min(s), 0 sec(s)<br /></pre><br /><br />Nieuwe code:<br /><pre><br />#!/usr/bin/perl<br /><br />use Data::Dumper;<br /><br />$ignore_summertime = $ARGV[0];<br />$opstatijd = $ARGV[1];<br />$slaaptijd = $ARGV[2];<br /><br />sub datestr_to_sec {<br />    my $str = shift;<br />    my $h, $m;<br />    <br />    if($str =~ /^(\d+):(\d+)$/) {<br />            $h = $1 + 0;<br />            $m = $2 + 0;<br />    }<br /><br />    return ($h * 3600) + ($m * 60);<br />}<br /><br />sub sec_to_read {<br />    my $sec = shift;<br />    my $d, $h, $m, $s;<br /><br />    $d = int($sec / 86400); $sec %= 86400;<br />    $h = int($sec / 3600);  $sec %= 3600;<br />    $m = int($sec / 60);    $sec %= 60;<br />    $s = $sec;<br /><br />    return "$d day(s), $h hour(s), $m min(s), $s sec(s)";<br />}<br />    <br />$list = {};<br />$counter = 0;<br />$prev = -1;<br />$currentsummertime = 0;<br /><br />$wakeup = datestr_to_sec($opstatijd);<br />$sleep  = datestr_to_sec($slaaptijd);<br /><br />while($line = <STDIN>) {<br /><br />    chomp $line;<br />    if($line =~ /<tr align="center" valign="bottom"><td>(\d+) (\d+) (\d+)&nbsp;<\/td><td>(\d\d:\d\d)&nbsp;<\/td><td>(\d\d:\d\d)&nbsp;<\/td><td> (\d\d)\.&nbsp;<\/td><td>(\d\d:\d\d)&nbsp;<\/td><td>(\d\d:\d\d)&nbsp;<\/td><\/tr>/) {<br />        my($day, $month, $year, $start, $end, $schem_duration, $schem_start, $schem_end) =<br />                ($1, $2, $3, $4, $5, $6, $7, $8);<br /><br />        $list->{$counter}->{day}                = $day;<br />        $list->{$counter}->{month}              = $day;<br />        $list->{$counter}->{year}               = $day;<br />        $list->{$counter}->{daytime}            = "$year$month$day";<br />        $list->{$counter}->{start_string}       = $start;<br />        $list->{$counter}->{start}              = datestr_to_sec($start);<br />        $list->{$counter}->{end_string}         = $end;<br />        $list->{$counter}->{end}                = datestr_to_sec($end);<br />        $list->{$counter}->{schem_duration}     = $schem_duration * 60;<br />        $list->{$counter}->{schem_start_string} = $schem_start;<br />        $list->{$counter}->{schem_start}        = datestr_to_sec($schem_start);<br />        $list->{$counter}->{schem_end_string}   = $schem_end;<br />        $list->{$counter}->{schem_end}          = datestr_to_sec($schem_end);<br /><br />        if($prev < 0) {<br />                # we start in januari, which is winter time<br />                $currentsummertime = 0;<br />        } elsif($list->{$counter}->{start} - $prev > 50*60) {<br />                # summer time<br />                #print "Switched to summertime on $list->{$counter}->{daytime}\n";<br />                $currentsummertime = 1;<br /><br />        } elsif($prev - $list->{$counter}->{start} > 50*60) {<br />                # winter time<br />                #print "Switched to wintertime on $list->{$counter}->{daytime}\n";<br />                $currentsummertime = 0;<br />        } else {<br /><br />        }<br />        $list->{$counter}->{summertime} = $currentsummertime;<br />        $prev = $list->{$counter}->{start};<br />        $counter++;<br />    }<br />}<br /><br />#print Dumper($list);<br /><br /># night<br />$blacksecs = 0;<br /># dawn<br />$greysecs = 0;<br /><br />$realwakeup = $wakeup;<br />$realsleep  = $sleep;<br /><br />for($i = 0; $i < $counter; $i++) {<br />    #print "$i $list->{$i}->{schem_start} sec $list->{$i}->{start} sec $list->{$i}->{end} sec $list->{$i}->{schem_end} sec drawday\n";<br /><br />    # simulate that summertime doesn't exist<br />    if($ignore_summertime and $list->{$i}->{summertime}) {<br />        $realwakeup = $wakeup + 3600;<br />        $realsleep  = $sleep  + 3600;<br />    } else {<br />        $realwakeup = $wakeup;<br />        $realsleep  = $sleep;<br />    }<br /><br />    # we wake up before dawn<br />    if($realwakeup < $list->{$i}->{schem_start}) {<br />        $blacksecs += ($list->{$i}->{schem_start} - $realwakeup);<br />    }<br /><br />    # we wake up before sunlight<br />    if($realwakeup < $list->{$i}->{start}) {<br />        # are we awake before dawn ?<br />        if($realwakeup < $list->{$i}->{schem_start}) {<br />                $greysecs += $list->{$i}->{schem_duration};<br />        } else {<br />                # we woke up during dawn<br />                $greysecs += $list->{$i}->{start} - $realwakeup;<br />        }<br />    }<br /><br />    # we go to realsleep when it's dark<br />    if($realsleep > $list->{$i}->{schem_end}) {<br />        $blacksecs += ($realsleep - $list->{$i}->{schem_end});<br />    }<br /><br />    # we go to realsleep when the sun sets<br />    if($realsleep > $list->{$i}->{end}) {<br />        if($realsleep > $list->{$i}->{schem_end}) {<br />                $greysecs += $list->{$i}->{schem_duration};<br />        } else {<br />                $greysecs += $realsleep - $list->{$i}->{end};<br />        }<br />    }<br />}<br /><br />print "Seconds in grey: $greysecs ".sec_to_read($greysecs)."\n";<br />print "Seconds in black: $blacksecs ".sec_to_read($blacksecs)."\n";<br /></pre><br /><br />En script om de bovenstaande output te genereren:<br /><pre><br />#!/bin/bash<br /><br />for h in `seq 4 12`; do<br />    for m in 0 15 30 45; do<br />        startt=`printf "%02d:%02d" $h $m`<br />        endt=`printf "%02d:%02d" $(($h+16)) $m`<br /><br />        greywith=`./zomeruur.pl 0 $startt $endt < zon_2007.html | grep grey | awk '{print $4}'`<br />        greywithout=`./zomeruur.pl 1 $startt $endt < zon_2007.html | grep grey | awk '{print $4}'`<br />        blackwith=`./zomeruur.pl 0 $startt $endt < zon_2007.html | grep black | awk '{print $4}'`<br />        blackwithout=`./zomeruur.pl 1 $startt $endt < zon_2007.html | grep black | awk '{print $4}'`<br />        # d = extra verbruik MET zomeruur<br />        d=$((greywith + blackwith - greywithout - blackwithout))<br /><br />        echo -n "$startt - $endt: "<br />        if [ $d -gt 0 ];<br />        then<br />                x=`./sec_to_read.pl $d`<br />                echo " extra verbruik met zomeruur = $x";<br />        else<br />                d=$((-$d))<br />                x=`./sec_to_read.pl $d`<br />                echo " uitgespaard verbruik met zomeruur = $x";<br />        fi<br />    done<br />done<br /></pre><br /><br />sec_to_read.pl script (om seconden naar iets leesbaar om te zetten):<br /><pre><br />#!/usr/bin/perl<br /><br />sub sec_to_read {<br />    my $sec = shift;<br />    my $d, $h, $m, $s;<br /><br />    $d = int($sec / 86400); $sec %= 86400;<br />    $h = int($sec / 3600);  $sec %= 3600;<br />    $m = int($sec / 60);    $sec %= 60;<br />    $s = $sec;<br /><br />    return "$d day(s), $h hour(s), $m min(s), $s sec(s)";<br />}<br />    <br />print sec_to_read($ARGV[0])."\n";<br /></pre>
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page60">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page58">Newer</a>
    
  
</div>

    </div>

  </body>
</html>

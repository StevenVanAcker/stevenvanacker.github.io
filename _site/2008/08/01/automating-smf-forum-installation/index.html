<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Automating SMF forum installation &middot; Singularity.be
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Singularity.be
        </a>
      </h1>
      <p class="lead">Steven Van Acker's blog</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
          
        
      
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/projects/">Projects</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/publications/">Publications</a>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
    </nav>

    <!-- <p>&copy; 2016. All rights reserved.</p> -->
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">Automating SMF forum installation</h1>
  <span class="post-date">01 Aug 2008</span>
  <!-- StevensBlogSpotFilterThing<br />I decided to look at SMF instead of phpBB as the forum of choice because SMF has OpenID support built in already.<br /><br />Just like I did previously for Mediawiki, I also plan to create a puppet recipe to install SMF. The first step is to automate the installation from the commandline. Just like MediaWiki, SMF expects you to surf to your freshly unpacked software and fill in some required fields. It will then create a configfile and database and such.<br /><br />This is the process I used to do everything from commandline:<br /><br />[PRE]<br />cd /tmp/<br />wget http://www.simplemachines.org/download/index.php/smf_2-0-beta3-1p_install.tar.bz2<br />mkdir /var/www/planet/planet.blabla.be/html/smf<br />cd /var/www/planet/planet.blabla.be/html/smf<br />tar -xjf /tmp/smf_2-0-beta3-1p_install.tar.bz2<br />chmod a+rw * ### This is obviously bad, but I'm too lazy to pick the files that I need to chmod at the moment<br />[/PRE]<br /><br />Create a file bla1.php:<br />[PRE]<br />&lt;?<br />$_GET["step"] = 1;<br />$_SERVER["HTTP_HOST"]       = "planet.blabla.be";<br />$_SERVER["PHP_SELF"]        = "/smf/install.php";<br />$_SERVER["HTTP_USER_AGENT"] = "installer";<br />$_POST["mbname"]         = "My Community";<br />$_POST["boardurl"]       = "http://planet.blabla.be/smf";<br />$_POST["compress"]       = "on";<br />$_POST["dbsession"]      = "on";<br />$_POST["db_type"]        = "mysql";<br />$_POST["db_server"]      = "localhost";<br />$_POST["db_user"]        = "root";<br />$_POST["db_passwd"]      = "";<br />$_POST["db_name"]        = "smf";<br />$_POST["db_filename"]    = "smf_12e728c1c8";<br />$_POST["db_prefix"]      = "smf_";<br /><br />include "install.php"; ?&gt;<br />[/PRE]<br /><br />create a file bla2.php:<br />[PRE]<br />&lt;?<br />$_GET["step"]            = 2;<br />$_SERVER["HTTP_HOST"]       = "planet.blabla.be";<br />$_SERVER["PHP_SELF"]        = "/smf/install.php";<br />$_SERVER["HTTP_USER_AGENT"] = "installer";<br />$_POST["username"]       = "xxx";<br />$_POST["password1"]      = "xxxx";<br />$_POST["password2"]      = "xxxx";<br />$_POST["email"]          = "test@test.com";<br />$_POST["password3"]      = "";<br /><br />include "install.php"; ?&gt;<br />[/PRE]<br /><br />Execute the scripts:<br />[PRE]<br />php bla1.php<br />php bla2.php<br />[/PRE]<br /><br />Enable OpenID:<br />[PRE]<br />echo "INSERT INTO smf_settings VALUES ('enableOpenID','1');" | mysql smf<br />[/PRE]<br /><br />Finish installation by removing some files:<br />[PRE]<br />rm -f install.php bla1.php bla2.php<br />[/PRE]<br />StevensBlogSpotFilterThing --><br />I decided to look at SMF instead of phpBB as the forum of choice because SMF has OpenID support built in already.<br /><br />Just like I did previously for Mediawiki, I also plan to create a puppet recipe to install SMF. The first step is to automate the installation from the commandline. Just like MediaWiki, SMF expects you to surf to your freshly unpacked software and fill in some required fields. It will then create a configfile and database and such.<br /><br />This is the process I used to do everything from commandline:<br /><br /><pre style="background-color: #EEEEEE; border: black 1px dashed; line-height: 100%; padding: 10px;"><br />cd /tmp/<br />wget http://www.simplemachines.org/download/index.php/smf_2-0-beta3-1p_install.tar.bz2<br />mkdir /var/www/planet/planet.blabla.be/html/smf<br />cd /var/www/planet/planet.blabla.be/html/smf<br />tar -xjf /tmp/smf_2-0-beta3-1p_install.tar.bz2<br />chmod a+rw * ### This is obviously bad, but I'm too lazy to pick the files that I need to chmod at the moment<br /></pre><br /><br />Create a file bla1.php:<br /><pre style="background-color: #EEEEEE; border: black 1px dashed; line-height: 100%; padding: 10px;"><br />&lt;?<br />$_GET["step"] = 1;<br />$_SERVER["HTTP_HOST"]       = "planet.blabla.be";<br />$_SERVER["PHP_SELF"]        = "/smf/install.php";<br />$_SERVER["HTTP_USER_AGENT"] = "installer";<br />$_POST["mbname"]         = "My Community";<br />$_POST["boardurl"]       = "http://planet.blabla.be/smf";<br />$_POST["compress"]       = "on";<br />$_POST["dbsession"]      = "on";<br />$_POST["db_type"]        = "mysql";<br />$_POST["db_server"]      = "localhost";<br />$_POST["db_user"]        = "root";<br />$_POST["db_passwd"]      = "";<br />$_POST["db_name"]        = "smf";<br />$_POST["db_filename"]    = "smf_12e728c1c8";<br />$_POST["db_prefix"]      = "smf_";<br /><br />include "install.php"; ?&gt;<br /></pre><br /><br />create a file bla2.php:<br /><pre style="background-color: #EEEEEE; border: black 1px dashed; line-height: 100%; padding: 10px;"><br />&lt;?<br />$_GET["step"]            = 2;<br />$_SERVER["HTTP_HOST"]       = "planet.blabla.be";<br />$_SERVER["PHP_SELF"]        = "/smf/install.php";<br />$_SERVER["HTTP_USER_AGENT"] = "installer";<br />$_POST["username"]       = "xxx";<br />$_POST["password1"]      = "xxxx";<br />$_POST["password2"]      = "xxxx";<br />$_POST["email"]          = "test@test.com";<br />$_POST["password3"]      = "";<br /><br />include "install.php"; ?&gt;<br /></pre><br /><br />Execute the scripts:<br /><pre style="background-color: #EEEEEE; border: black 1px dashed; line-height: 100%; padding: 10px;"><br />php bla1.php<br />php bla2.php<br /></pre><br /><br />Enable OpenID:<br /><pre style="background-color: #EEEEEE; border: black 1px dashed; line-height: 100%; padding: 10px;"><br />echo "INSERT INTO smf_settings VALUES ('enableOpenID','1');" | mysql smf<br /></pre><br /><br />Finish installation by removing some files:<br /><pre style="background-color: #EEEEEE; border: black 1px dashed; line-height: 100%; padding: 10px;"><br />rm -f install.php bla1.php bla2.php<br /></pre>
</div>


    </div>

  </body>
</html>

<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Singularity.be &middot; Flawed logic inspecting flawed logic
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Singularity.be
        </a>
      </h1>
      <p class="lead">Steven Van Acker's blog</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
          
        
      
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/projects/">Projects</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/publications/">Publications</a>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
    </nav>

    <!-- <p>&copy; 2016. All rights reserved.</p> -->
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2006/06/15/current-stuff-postscript-editing/">
        current stuff: postscript editing
      </a>
    </h1>

    <span class="post-date">15 Jun 2006</span>

    I've been too busy to write blogs lately.<br />It appears it's been about 2 weeks since I wrote one.<br /><br />Lemme try to remember what I've done since then...<br /><br />June 7th, I went sailing with a couple friends. It was a while since I did anything of the kind. There was a nice wind blowing, lots of sun and I steered all day ;)<br />June 9th was a quiz with cheese and wine. We lost (7th place out of 10), but was still a good time.<br /><br />I planned the re-installation of our main gateways last week and was able to give it a try this tuesday. Of course, as I expected, I overlooked an important part of the routing and had to give up the attempt. Yesterday (wednesday) I had it all working and the switch went smoothly (unlike tuesday when half the university network went down for an hour)<br /><br />I got a projector for free a couple days ago which I set up at home. The color alignment is off, and it can't be corrected. But it's still better than nothing.<br />Since this month it's world championship football, I wanted to try playing TV on the projector. We only have 1 TV-tuner (besides the TV and VCR) at home, and it's not installed in my computer.<br />It worked though, by recording TV with mencoder to a fifo, catting that file in a netcat and reading from it over network into mplayer. Having TV projected on a wall is very nice :)<br />It reminds me why I wanted to buy that new fileserver...<br /><br />After installing the new gateways, I was once more sick of labelling cables (at least 4 cables per machine, 2 labels per cable) and looked around for an alternative. I found sheets of labels that are suitable for a laserprinter and I created a postscript file to print labels.<br />Today I'll see if I can get a nice logo on it, just for the fun of it. I managed to get an image into the postscript file (with the colorimage directive), but 1 argument is still a mistery to me: the matrix. I know it has something to do with the positioning of the image, but I can't find any documentation of it. The matrix consists of 6 numbers instead of the 4 I expected. The numbers inside also don't represent vectors... it's puzzling. But at least I know it has something to do with a local coordinate system. The picture can't be moved around with the moveto or rmoveto directives: I have to use the matrix.<br />Hopefully more information on this blog during the day ;)<br /><br />I hope the weather clears up before the 1st of july. I planned my holidays from July 1st till August 21st. Quite a long time, but I think I can spend it well.<br />I plan to get my drivers license. I've been practicing my parallel parking and am pretty good at it now. So all thats left is driving around in the city.<br />holidays<br />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2006/05/30/openssh-cross-realm-authentication-with/">
        openssh Cross-realm authentication with heimdal
      </a>
    </h1>

    <span class="post-date">30 May 2006</span>

    Let's provide some more useful content for a change.<br /><br />Today I'll be documenting the setup of cross-realm authentication using Heimdal kerberos for openssh.<br /><br />We already have Kerberos setup for KULEUVEN.BE and it holds the accounts of all students and personnel. What I will do is setup a local (departemental) KDC and an SSH-server that has its keytab registered in that local KDC. The idea is that a departement can add local SSH-servers as much as it wants, and it should only change it's local KDC. The authentication of users still happens against the main KULEUVEN.BE KDC.<br /><br />OpenSSH supports kerberos authentication using tickets, but only from version 4.2p1 onward. This is because OpenSSH needs to be patched with the GSSAPI mechanism.<br />Lucky for us, Debian unstable's OpenSSH packages (openssh-server and openssh-client) are already patched this way.<br />Furthermore, I'll be using heimdal-kdc as the kerberos server (also in Debian).<br /><br />All that is left now it configuration.<br /><br />Let's start with an overview of the systems.<br /><br /><pre><br />The client:     192.168.2.103 (dhcp-103.kulnet-l)<br />The SSH server: 192.168.2.200 (vmware1.kulnet-l)<br />The local KDC:  192.168.2.201 (vmware2.kulnet-l, realm TMPKDC.NET)<br />The main KDC:   kdc1.kuleuven.be (realm KULEUVEN.BE)<br /></pre><br /><br />First, let's set things up so we can use kerberos to login to the ssh server.<br />I created a principle u0036393@TMPKDC.NET on the local KDC (kadmin -l and add u0036393)<br />and a host principle for the SSH server: host/vmware1.kulnet-l with a random key (kadmin -l and add --random-key host/vmware1.kulnet-l)<br />Now the key needs to exported to the SSH server:<br /><br /><pre><br />kadmin -l<br />ext -k /tmp/bla host/vmware1.kulnet-l<br />scp /tmp/bla 192.168.2.200:/etc/krb5.keytab<br />restart SSH after that<br /></pre><br /><br />some other things to do on the KDC:<br /><pre><br />open firewall for port 88/udp<br />keep clock in sync<br />edit /etc/krb5.conf<br /></pre><br /><br />I edited the krb5.conf file and cleaned up a bit.<br />Things you need to look out for:<br /><pre><br />[libdefaults]<br />    default_realm = TMPKDC.NET<br />...<br />[realms]<br />    TMPKDC.NET = {<br />        kdc=192.168.2.201<br />        admin_server=192.168.2.201<br />    }<br />...<br />[domain_realm]<br />    kulnet-l = TMPKDC.NET<br />    .kulnet-l = TMPKDC.NET<br />...<br /></pre><br /><br />Copy this file to the client as well (in my case, 192.168.2.103) as /etc/krb5.conf, otherwise you'll see something like this:<br /><br /><pre><br />(deepstar/tachyon) ~/debian$ kinit u0036393@TMPKDC.NET<br />u0036393@TMPKDC.NET's Password: <br />kinit: krb5_get_init_creds: unable to reach any KDC in realm TMPKDC.NET<br /></pre><br /><br />Let's try to get a ticket from the KDC now. First, I have to clean out my current tickets (kdestroy) so I can work cleanly.<br /><br /><pre><br />(deepstar/tachyon) ~/debian$ klist <br />Credentials cache: FILE:/tmp/krb5cc_1000<br />        Principal: u0036393@KULEUVEN.BE<br /><br />  Issued           Expires        Principal<br />May 29 15:51:13  &gt;&gt;&gt;Expired&lt;&lt;&lt;  krbtgt/KULEUVEN.BE@KULEUVEN.BE<br />May 29 15:51:26  &gt;&gt;&gt;Expired&lt;&lt;&lt;  krbtgt/TESTKDC.NET@KULEUVEN.BE<br />May 29 15:51:23  &gt;&gt;&gt;Expired&lt;&lt;&lt;  host/dhcp-103.kulnet-l@TESTKDC.NET<br />(deepstar/tachyon) ~/debian$ kdestroy <br />(deepstar/tachyon) ~/debian$ kinit u0036393@TMPKDC.NET<br />u0036393@TMPKDC.NET's Password: <br />(deepstar/tachyon) ~/debian$ klist <br />Credentials cache: FILE:/tmp/krb5cc_1000<br />        Principal: u0036393@TMPKDC.NET<br /><br />  Issued           Expires          Principal<br />May 30 11:03:39  May 31 00:14:27  krbtgt/TMPKDC.NET@TMPKDC.NET<br />(deepstar/tachyon) ~/debian$ <br /><br /></pre><br /><br />As you can see, it worked.<br /><br />Now for logging in.<br /><br />(Create the u0036393 account on the SSH-server before starting...)<br /><br />Add these lines to the sshd_config of the SSH-server:<br /><br /><pre><br />    GSSAPIAuthentication yes<br />    GSSAPIDelegateCredentials yes<br /></pre><br /><br />Also add them to the ssh_config of the client<br /><br />Something that gave me a lot of trouble before is the canonical hostname of the SSH-server.<br />Run /usr/sbin/sshd -de after /etc/init.d/ssh to start the SSH-server in debug mode. If you see something like this:<br /><pre><br />FIXME<br /></pre><br />Then add your hostname to /etc/hosts<br /><pre><br />127.0.0.1 vmware1.kulnet-l sshserver localhost localhost.localdomain<br /></pre><br /><br />It's important that "vmware1.kulnet-l" is first.<br />"sshserver" is listed second because that is what I have in /etc/hostname. If you use different hostnames as FQDN and hostname, do this too.<br /><br />check with "hostname -f" to see if it worked.<br /><br />Install heimdal-clients on the SSH-server and copy the krb5.conf from the client.<br /><br />If everything went ok, you can do this:<br /><pre><br />(deepstar/tachyon) ~/debian$ kdestroy <br />(deepstar/tachyon) ~/debian$ kinit u0036393@TMPKDC.NET<br />u0036393@TMPKDC.NET's Password: <br />(deepstar/tachyon) ~/debian$ ssh u0036393@vmware1.kulnet-l<br />Linux sshserver 2.6.8-2-386 #1 Thu May 19 17:40:50 JST 2005 i686<br /><br />The programs included with the Debian GNU/Linux system are free software;<br />the exact distribution terms for each program are described in the<br />individual files in /usr/share/doc/*/copyright.<br /><br />Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent<br />permitted by applicable law.<br />No mail.<br />Last login: Tue May 30 14:45:38 2006 from dhcp-103.kulnet-l<br />u0036393@sshserver:~$ logout<br />Connection to vmware1.kulnet-l closed.<br />(deepstar/tachyon) ~/debian$ klist <br />Credentials cache: FILE:/tmp/krb5cc_1000<br />        Principal: u0036393@TMPKDC.NET<br /><br />  Issued           Expires          Principal<br />May 30 14:53:53  May 31 00:53:57  krbtgt/TMPKDC.NET@TMPKDC.NET<br />May 30 14:54:01  May 31 00:53:57  host/vmware1.kulnet-l@TMPKDC.NET<br />(deepstar/tachyon) ~/debian$ <br /></pre><br /><br />(To test if you can get a ticket for some principle, try kgetcred ...)<br /><br />Ok, now authentication works and openssh works with a kerberos ticket.<br /><br />What's left now is the cross-realm authentication.<br /><br />We need to add the principle krbtgt/TMPKDC.NET@KULEUVEN.BE to both our local and main KDC.<br />They need to have the same password.<br /><br />(For some reason, after I added the principles to both KDC's, they had different kvno numbers. That stirred up trouble... So on the KDC that had kvno=0, I just changed the password and set it to the same thing. That does absolutely nothing, except increase the kvno :)<br /><br /><pre><br />(deepstar/tachyon) ~/debian$ kdestroy <br />(deepstar/tachyon) ~/debian$ kinit u0036393@KULEUVEN.BE<br />u0036393@KULEUVEN.BE's Password: <br />(deepstar/tachyon) ~/debian$ klist <br />Credentials cache: FILE:/tmp/krb5cc_1000<br />        Principal: u0036393@KULEUVEN.BE<br /><br />  Issued           Expires          Principal<br />May 30 15:18:05  May 31 01:18:04  krbtgt/KULEUVEN.BE@KULEUVEN.BE<br />(deepstar/tachyon) ~/debian$ ssh u0036393@vmware1.kulnet-l<br />Linux sshserver 2.6.8-2-386 #1 Thu May 19 17:40:50 JST 2005 i686<br /><br />The programs included with the Debian GNU/Linux system are free software;<br />the exact distribution terms for each program are described in the<br />individual files in /usr/share/doc/*/copyright.<br /><br />Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent<br />permitted by applicable law.<br />No mail.<br />Last login: Tue May 30 15:16:36 2006 from dhcp-103.kulnet-l<br />u0036393@sshserver:~$ logout<br />Connection to vmware1.kulnet-l closed.<br />(deepstar/tachyon) ~/debian$ klist <br />Credentials cache: FILE:/tmp/krb5cc_1000<br />        Principal: u0036393@KULEUVEN.BE<br /><br />  Issued           Expires          Principal<br />May 30 15:18:05  May 31 01:18:04  krbtgt/KULEUVEN.BE@KULEUVEN.BE<br />May 30 15:18:09  May 31 01:18:04  krbtgt/TMPKDC.NET@KULEUVEN.BE<br />May 30 15:18:09  May 31 01:18:04  host/vmware1.kulnet-l@TMPKDC.NET<br />(deepstar/tachyon) ~/debian$ <br /></pre><br /><br />Important to note:<br />the krb5.conf files on the client, SSH-server and local KDC need to be aware of the local realm (TMPKDC.NET). But only the SSH-server needs to have it's default_realm set to KULEUVEN.BE
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2006/05/28/fglrx-dualhead/">
        FGLRX dualhead
      </a>
    </h1>

    <span class="post-date">28 May 2006</span>

    I brought up my old 19 inch screen from the basement and hooked it up to my laptop. I remember how I had my svideo working in Windows on my old laptop and I wanted to see how easy it was in Linux.<br /><br />As it happens, it is extremely easy.<br />Debian has a package called fglrx-control which is a nice GUI-tool to set dualhead and whatnot.<br />Of course, you need the fglrx driver loaded for that.<br /><br />This <a href='http://www.ubuntuforums.org/showthread.php?t=65276'>post</a> on the Gentoo forums can be of some help.<br />Debian doesn't give us an fglrxconfig tool, but has renamed it to aticonfig.<br />running it like this:<br /><pre><br />aticonfig --initial=dual-head<br /></pre><br /><br />will get you a basic dualhead config. restarting X then lets the magic happen! :)
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2006/05/28/execstack-to-rescue/">
        execstack to the rescue
      </a>
    </h1>

    <span class="post-date">28 May 2006</span>

    Since debian is being a bitch about wanting executable stack when the program doesn't need it, I've been looking for a way to modify the ELF header so it no longer requires that functionality.<br /><br />It seems the execstack tool could do the job. It's in the prelink package.<br /><br />So far, I've had to clear (execstack -c) the flags on:<br /><pre><br />/usr/lib/libgcrypt.so.11<br />/usr/lib/liblzo.so.1<br />/usr/lib/libdivxdecore.so.0<br />/usr/lib/libmp3lame.so.0<br />/usr/lib/libxvidcore.so.4<br />/usr/lib/libGL.so.1<br /></pre><br /><br />After going through my filesystem a bit, I've found a whole bunch of programs requiring executable stack.<br />And I fell over a tool from mysql-server called "resolveip" which barely fits on a single floppy (1.4MB). Now why the hell is that program so huge ?!<br /><br />I scanned my entire disk for ELF binaries and found that all these require executable stack:<br /><br /><pre><br />X ./usr/bin/gpg<br />X ./usr/bin/gpgv<br />X ./usr/bin/myisam_ftdump<br />X ./usr/bin/mysql_client_test_embedded<br />X ./usr/bin/mysqltest_embedded<br />X ./usr/bin/mysql_waitpid<br />X ./usr/bin/comp_err<br />X ./usr/bin/my_print_defaults<br />X ./usr/bin/myisamchk<br />X ./usr/bin/myisamlog<br />X ./usr/bin/myisampack<br />X ./usr/bin/ndb_drop_index<br />X ./usr/bin/ndb_desc<br />X ./usr/bin/mysql_tzinfo_to_sql<br />X ./usr/bin/ndb_delete_all<br />X ./usr/bin/ndb_select_count<br />X ./usr/bin/ndb_drop_table<br />X ./usr/bin/ndb_mgm<br />X ./usr/bin/ndb_restore<br />X ./usr/bin/ndb_select_all<br />X ./usr/bin/resolve_stack_dump<br />X ./usr/bin/ndb_show_tables<br />X ./usr/bin/ndb_waiter<br />X ./usr/bin/perror<br />X ./usr/bin/replace<br />X ./usr/bin/resolveip<br />X ./usr/lib/klibc/bin/gzip<br />X ./usr/lib/klibc/bin/ipconfig<br />X ./usr/lib/klibc/bin/kinit<br />X ./usr/lib/klibc/bin/nfsmount<br />X ./usr/lib/klibc/bin/cat<br />X ./usr/lib/klibc/bin/chroot<br />X ./usr/lib/klibc/bin/dd<br />X ./usr/lib/klibc/bin/false<br />X ./usr/lib/klibc/bin/fstype<br />X ./usr/lib/klibc/bin/insmod<br />X ./usr/lib/klibc/bin/ln<br />X ./usr/lib/klibc/bin/minips<br />X ./usr/lib/klibc/bin/mkdir<br />X ./usr/lib/klibc/bin/mkfifo<br />X ./usr/lib/klibc/bin/mount<br />X ./usr/lib/klibc/bin/nuke<br />X ./usr/lib/klibc/bin/pivot_root<br />X ./usr/lib/klibc/bin/run-init<br />X ./usr/lib/klibc/bin/sleep<br />X ./usr/lib/klibc/bin/true<br />X ./usr/lib/klibc/bin/umount<br />X ./usr/lib/klibc/bin/uname<br />X ./usr/lib/klibc/bin/gunzip<br />X ./usr/lib/klibc/bin/sh.shared<br />X ./usr/lib/klibc/bin/zcat<br />X ./usr/lib/helix/player/codecs/colorcvt.so<br />X ./usr/lib/helix/player/codecs/cvt1.so<br />X ./usr/lib/helix/player/plugins/vidsite.so<br />X ./usr/lib/xorg/modules/drivers/nsc_drv.so<br />X ./usr/lib/dri/fglrx_dri.so<br />X ./usr/lib/xine/plugins/1.1.1/xineplug_decode_w32dll.so<br />X ./usr/lib/xine/plugins/1.1.1/xineplug_decode_qt.so<br />X ./usr/sbin/iconvconfig<br />X ./usr/sbin/mysqlmanager<br />X ./usr/sbin/mysqld<br />X ./usr/sbin/ndb_cpcd<br />X ./usr/sbin/ndbd<br />X ./usr/sbin/ndb_mgmd<br />X ./bin/gzip<br />X ./bin/gunzip<br />X ./bin/zcat<br />X ./bin/uncompress<br />X ./lib/klibc-NDtVTttYAxNaaNiOsQ6T1EIYUSo.so<br />X ./sbin/grub<br />X ./sbin/insmod.modutils<br />X ./sbin/cryptsetup<br /></pre><br /><br />
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2006/05/28/random-gayness/">
        random gayness
      </a>
    </h1>

    <span class="post-date">28 May 2006</span>

    I spent yesterday evening reading the OGRE3D 1.2 manual. And I didn't learn much from it. Most of the documentation (about 180 pages of it I believe) is focused on how to create and adjust material properties of objects inside OGRE. I can find no documentation on how to make Ogre react to user input (Mouse, keyboard, ...) however.<br /><br />Well then, I'll have to look into it some more later on.<br /><br />Today I compiled the grsecurity patch in the kernel I use for this laptop. Of course the debian packages are available at <a href='http://www.singularity.be/debian_d610'>http://www.singularity.be/debian_d610</a>. <br />After booting, I found that Debian Sid doesn't like grsecurity very much. For some random gay reason, at least 1 library is compiled in a way that expects executable stack. From what I can gather, the Debian packagers don't seem very eager to fix the problem.<br /><br />I hope they can be persuaded to make Debian more secure. I've been using it for ages and I like it very much. It would be a shame to switch to another distribution, just because Debian doesn't want to be secure and I do.
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page76">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page74">Newer</a>
    
  
</div>

    </div>

  </body>
</html>

---
layout: post
title: Using S/MIME in Evolution
date: '2008-03-12T09:48:00.004+01:00'
author: Steven Van Acker
tags:
- English
- Ubuntu
modified_time: '2008-03-12T10:21:29.919+01:00'
blogger_id: tag:blogger.com,1999:blog-5513234137363262204.post-9104942684600735930
blogger_orig_url: http://www.singularity.be/2008/03/using-smime-in-evolution.html
---

S/MIME is a method to send signed and/or encrypted messages through E-mail. <br />It's relatively easy to setup in Evolution:<br /><br /><b>Step 1: Create an SSL key and certificate</b><br /><br />First thing to do, is create a private key for yourself, and generate a CSR (certificate signing request) from it.<br /><br /><blockquote><br />openssl req -out myname.csr -pubkey -new -keyout myname.key<br /></blockquote><br /><br />Fill in some details about where you are and who you are. When asked for a password, enter a password ;) If someone steals your private key, they can impersonate you and that's not what you want to use S/MIME for.<br /><br />Now send the myname.csr file to someone who can sign it (a certificate authority). You'll get a myname.crt file back. (Look elsewhere for information on how to create your own CA and sign it yourself)<br /><br />Evolution expects a PKCS12 file, which is a file format that holds both the private key and the certificate. You can create it as follows:<br /><br /><blockquote><br />openssl pkcs12 -export -inkey myname.key -in myname.crt -out myname.pkcs12<br /></blockquote><br /><br />Now the stage is set. Enter Evolution.<br /><br /><b>Step 2: Import it into Evolution</b><br /><br />Edit -> Preferences<br />Click the Certificates tab, then the "Your Certificates" tab and then "Import"<br />Find the myname.pkcs12 file you just created and click "OK".<br />You'll be asked for a password of the certificate, and another password to protect your keystore.<br /><br />If you are using a selfsigned certificate (like me), you need to import your CA certificate as well.<br /><br />To do that, you first need to find your CA certificate ;) Poke the person who signed your certificate in the ribs and ask him for this certificate.<br />Next, go to Edit -> Preferences -> Certificates -> Authorities<br />Click on "Import", select the CA certificate file and click OK.<br /><br />Evolution will ask you about trust settings. We want to use these certificates for E-mail, so that's the second option "Trust this CA to identify email users".<br />Of course, this only applies to us when we receive mails that were signed or encrypted by someone else. But it's important when you want to test by sending mail to yourself.<br /><br />Certificates are locked and loaded. Now it's time to use them.<br /><br /><b>Step 3: Enable the S/MIME signing and/or encrypting</b><br /><br />Go to Edit -> Preferences -> Mail Accounts, select your account and click "Edit".<br />Find the "Security" tab and the "Secure MIME (S/MIME)" section under it.<br /><br />You can either sign mails, encrypt them, or do both. I sign and encrypt them by default. (Encrypting mails will only make sense if you have the public key of the recipient).<br /><br />Don't forget to set "Also encrypt to self when sending encrypted mail" if you want to try this out by sending mail to yourself.<br /><br />Now if only amazon and other phished internet services started using this...
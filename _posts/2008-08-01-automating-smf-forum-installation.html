---
layout: post
title: Automating SMF forum installation
date: '2008-08-01T17:40:00.004+02:00'
author: Steven Van Acker
tags:
- MediaWiki
- OpenID
- Puppet
- English
- Fedora
- SMF
modified_time: '2008-08-01T17:50:13.010+02:00'
blogger_id: tag:blogger.com,1999:blog-5513234137363262204.post-2418876583495135009
blogger_orig_url: http://www.singularity.be/2008/08/automating-smf-forum-installation.html
---

<!-- StevensBlogSpotFilterThing<br />I decided to look at SMF instead of phpBB as the forum of choice because SMF has OpenID support built in already.<br /><br />Just like I did previously for Mediawiki, I also plan to create a puppet recipe to install SMF. The first step is to automate the installation from the commandline. Just like MediaWiki, SMF expects you to surf to your freshly unpacked software and fill in some required fields. It will then create a configfile and database and such.<br /><br />This is the process I used to do everything from commandline:<br /><br />[PRE]<br />cd /tmp/<br />wget http://www.simplemachines.org/download/index.php/smf_2-0-beta3-1p_install.tar.bz2<br />mkdir /var/www/planet/planet.blabla.be/html/smf<br />cd /var/www/planet/planet.blabla.be/html/smf<br />tar -xjf /tmp/smf_2-0-beta3-1p_install.tar.bz2<br />chmod a+rw * ### This is obviously bad, but I'm too lazy to pick the files that I need to chmod at the moment<br />[/PRE]<br /><br />Create a file bla1.php:<br />[PRE]<br />&lt;?<br />$_GET["step"] = 1;<br />$_SERVER["HTTP_HOST"]       = "planet.blabla.be";<br />$_SERVER["PHP_SELF"]        = "/smf/install.php";<br />$_SERVER["HTTP_USER_AGENT"] = "installer";<br />$_POST["mbname"]         = "My Community";<br />$_POST["boardurl"]       = "http://planet.blabla.be/smf";<br />$_POST["compress"]       = "on";<br />$_POST["dbsession"]      = "on";<br />$_POST["db_type"]        = "mysql";<br />$_POST["db_server"]      = "localhost";<br />$_POST["db_user"]        = "root";<br />$_POST["db_passwd"]      = "";<br />$_POST["db_name"]        = "smf";<br />$_POST["db_filename"]    = "smf_12e728c1c8";<br />$_POST["db_prefix"]      = "smf_";<br /><br />include "install.php"; ?&gt;<br />[/PRE]<br /><br />create a file bla2.php:<br />[PRE]<br />&lt;?<br />$_GET["step"]            = 2;<br />$_SERVER["HTTP_HOST"]       = "planet.blabla.be";<br />$_SERVER["PHP_SELF"]        = "/smf/install.php";<br />$_SERVER["HTTP_USER_AGENT"] = "installer";<br />$_POST["username"]       = "xxx";<br />$_POST["password1"]      = "xxxx";<br />$_POST["password2"]      = "xxxx";<br />$_POST["email"]          = "test@test.com";<br />$_POST["password3"]      = "";<br /><br />include "install.php"; ?&gt;<br />[/PRE]<br /><br />Execute the scripts:<br />[PRE]<br />php bla1.php<br />php bla2.php<br />[/PRE]<br /><br />Enable OpenID:<br />[PRE]<br />echo "INSERT INTO smf_settings VALUES ('enableOpenID','1');" | mysql smf<br />[/PRE]<br /><br />Finish installation by removing some files:<br />[PRE]<br />rm -f install.php bla1.php bla2.php<br />[/PRE]<br />StevensBlogSpotFilterThing --><br />I decided to look at SMF instead of phpBB as the forum of choice because SMF has OpenID support built in already.<br /><br />Just like I did previously for Mediawiki, I also plan to create a puppet recipe to install SMF. The first step is to automate the installation from the commandline. Just like MediaWiki, SMF expects you to surf to your freshly unpacked software and fill in some required fields. It will then create a configfile and database and such.<br /><br />This is the process I used to do everything from commandline:<br /><br /><pre style="background-color: #EEEEEE; border: black 1px dashed; line-height: 100%; padding: 10px;"><br />cd /tmp/<br />wget http://www.simplemachines.org/download/index.php/smf_2-0-beta3-1p_install.tar.bz2<br />mkdir /var/www/planet/planet.blabla.be/html/smf<br />cd /var/www/planet/planet.blabla.be/html/smf<br />tar -xjf /tmp/smf_2-0-beta3-1p_install.tar.bz2<br />chmod a+rw * ### This is obviously bad, but I'm too lazy to pick the files that I need to chmod at the moment<br /></pre><br /><br />Create a file bla1.php:<br /><pre style="background-color: #EEEEEE; border: black 1px dashed; line-height: 100%; padding: 10px;"><br />&lt;?<br />$_GET["step"] = 1;<br />$_SERVER["HTTP_HOST"]       = "planet.blabla.be";<br />$_SERVER["PHP_SELF"]        = "/smf/install.php";<br />$_SERVER["HTTP_USER_AGENT"] = "installer";<br />$_POST["mbname"]         = "My Community";<br />$_POST["boardurl"]       = "http://planet.blabla.be/smf";<br />$_POST["compress"]       = "on";<br />$_POST["dbsession"]      = "on";<br />$_POST["db_type"]        = "mysql";<br />$_POST["db_server"]      = "localhost";<br />$_POST["db_user"]        = "root";<br />$_POST["db_passwd"]      = "";<br />$_POST["db_name"]        = "smf";<br />$_POST["db_filename"]    = "smf_12e728c1c8";<br />$_POST["db_prefix"]      = "smf_";<br /><br />include "install.php"; ?&gt;<br /></pre><br /><br />create a file bla2.php:<br /><pre style="background-color: #EEEEEE; border: black 1px dashed; line-height: 100%; padding: 10px;"><br />&lt;?<br />$_GET["step"]            = 2;<br />$_SERVER["HTTP_HOST"]       = "planet.blabla.be";<br />$_SERVER["PHP_SELF"]        = "/smf/install.php";<br />$_SERVER["HTTP_USER_AGENT"] = "installer";<br />$_POST["username"]       = "xxx";<br />$_POST["password1"]      = "xxxx";<br />$_POST["password2"]      = "xxxx";<br />$_POST["email"]          = "test@test.com";<br />$_POST["password3"]      = "";<br /><br />include "install.php"; ?&gt;<br /></pre><br /><br />Execute the scripts:<br /><pre style="background-color: #EEEEEE; border: black 1px dashed; line-height: 100%; padding: 10px;"><br />php bla1.php<br />php bla2.php<br /></pre><br /><br />Enable OpenID:<br /><pre style="background-color: #EEEEEE; border: black 1px dashed; line-height: 100%; padding: 10px;"><br />echo "INSERT INTO smf_settings VALUES ('enableOpenID','1');" | mysql smf<br /></pre><br /><br />Finish installation by removing some files:<br /><pre style="background-color: #EEEEEE; border: black 1px dashed; line-height: 100%; padding: 10px;"><br />rm -f install.php bla1.php bla2.php<br /></pre>
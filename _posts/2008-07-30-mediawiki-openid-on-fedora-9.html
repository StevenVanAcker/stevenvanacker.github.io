---
layout: post
title: Mediawiki + OpenID on fedora 9
date: '2008-07-30T23:01:00.010+02:00'
author: Steven Van Acker
tags:
- MediaWiki
- OpenID
- English
- Fedora
modified_time: '2008-07-31T19:50:28.525+02:00'
blogger_id: tag:blogger.com,1999:blog-5513234137363262204.post-9002761232456885683
blogger_orig_url: http://www.singularity.be/2008/07/mediawiki-openid-on-fedora-9.html
---

<!-- StevensBlogSpotFilterThing<br />I've been looking at OpenID under fedora more closely and found that the php-pear-Auth-OpenID package is maintained by Axel Thimm. I also found that there are bugreports running aginst this package and that the last <a href="https://bugzilla.redhat.com/show_bug.cgi?id=227190">mail related to one of those bugs</a> was sent today.<br /><br />This mail contains a link to the source RPM and specfile, which is reason enough for me to give it a go.<br /><br /><br />First, build and install php-pear-Auth-OpenID<br /><br />[PRE]<br />yum install rpm-build php-pear php-bcmath php-pear-Net-Curl<br />mkdir -p /usr/src/redhat<br /><br />cd /tmp<br />wget http://dl.atrpms.net/all/php-pear-Auth-OpenID-2.1.1-5.src.rpm<br />rpm -i php-pear-Auth-OpenID-2.1.1-5.src.rpm<br /><br />cd /usr/src/redhat/SPECS/<br />rpmbuild -ba php-pear-Auth-OpenID.spec<br /><br />rpm -i ../RPMS/noarch/php-pear-Auth-OpenID-2.1.1-5.fc9.noarch.rpm<br />[/PRE]<br /><br />Make some forgotten symlink...<br />[PRE]<br />ln -s /usr/share/pear/Auth_OpenID/ /usr/share/pear/Auth<br />[/PRE]<br /><br />Next, install mediawiki-openid from ATrpms<br /><br />[PRE]<br />(cat &lt;&lt;EOF;<br />[atrpms]<br />name=Fedora Core \$releasever - \$basearch - ATrpms<br />baseurl=http://dl.atrpms.net/f\$releasever-\$basearch/atrpms/stable<br />gpgkey=http://ATrpms.net/RPM-GPG-KEY.atrpms<br />gpgcheck=1<br />EOF<br />) > /etc/yum.repos.d/atrpms.repo<br /><br />yum install mediawiki-openid<br />[/PRE]<br /><br />Finally, set up mediawiki-openid<br />[PRE]<br />ln -s /usr/share/mediawiki/extensions/ /var/www/wiki/<br />mysql wikidb < /usr/share/doc/mediawiki-openid-0.8.2/openid_table.sql<br />echo 'require_once("$IP/extensions/OpenID/OpenID.setup.php");' >> /var/www/wiki/LocalSettings.php<br />[/PRE]<br /><br />And the result ? It doesn't work ! How exciting<br /><br />I keep getting errors like these:<br />[PRE]<br />[Tue Jul 22 15:59:58 2008] [error] [client 172.16.1.2] PHP Warning:  Missing argument 2 for OpenIDArticleViewHeader() in /usr/share/mediawiki/extensions/OpenID/OpenID.setup.php on line 168<br />[Tue Jul 22 15:59:58 2008] [error] [client 172.16.1.2] PHP Warning:  Missing argument 3 for OpenIDArticleViewHeader() in /usr/share/mediawiki/extensions/OpenID/OpenID.setup.php on line 168<br />[Tue Jul 22 15:59:58 2008] [error] [client 172.16.1.2] PHP Fatal error:  Call to undefined function wfLoadExtensionMessages() in /usr/share/mediawiki/extensions/OpenID/OpenID.setup.php on line 153<br />[/PRE]<br /><br /><br />StevensBlogSpotFilterThing --><br />I've been looking at OpenID under fedora more closely and found that the php-pear-Auth-OpenID package is maintained by Axel Thimm. I also found that there are bugreports running aginst this package and that the last <a href="https://bugzilla.redhat.com/show_bug.cgi?id=227190">mail related to one of those bugs</a> was sent today.<br /><br />This mail contains a link to the source RPM and specfile, which is reason enough for me to give it a go.<br /><br /><br />First, build and install php-pear-Auth-OpenID<br /><br /><pre style="background-color: #EEEEEE; border: black 1px dashed; line-height: 100%; padding: 10px;"><br />yum install rpm-build php-pear php-bcmath php-pear-Net-Curl<br />mkdir -p /usr/src/redhat<br /><br />cd /tmp<br />wget http://dl.atrpms.net/all/php-pear-Auth-OpenID-2.1.1-5.src.rpm<br />rpm -i php-pear-Auth-OpenID-2.1.1-5.src.rpm<br /><br />cd /usr/src/redhat/SPECS/<br />rpmbuild -ba php-pear-Auth-OpenID.spec<br /><br />rpm -i ../RPMS/noarch/php-pear-Auth-OpenID-2.1.1-5.fc9.noarch.rpm<br /></pre><br /><br />Make some forgotten symlink...<br /><pre style="background-color: #EEEEEE; border: black 1px dashed; line-height: 100%; padding: 10px;"><br />ln -s /usr/share/pear/Auth_OpenID/ /usr/share/pear/Auth<br /></pre><br /><br />Next, install mediawiki-openid from ATrpms<br /><br /><pre style="background-color: #EEEEEE; border: black 1px dashed; line-height: 100%; padding: 10px;"><br />(cat &lt;&lt;EOF;<br />[atrpms]<br />name=Fedora Core \$releasever - \$basearch - ATrpms<br />baseurl=http://dl.atrpms.net/f\$releasever-\$basearch/atrpms/stable<br />gpgkey=http://ATrpms.net/RPM-GPG-KEY.atrpms<br />gpgcheck=1<br />EOF<br />) > /etc/yum.repos.d/atrpms.repo<br /><br />yum install mediawiki-openid<br /></pre><br /><br />Finally, set up mediawiki-openid<br /><pre style="background-color: #EEEEEE; border: black 1px dashed; line-height: 100%; padding: 10px;"><br />ln -s /usr/share/mediawiki/extensions/ /var/www/wiki/<br />mysql wikidb < /usr/share/doc/mediawiki-openid-0.8.2/openid_table.sql<br />echo 'require_once("$IP/extensions/OpenID/OpenID.setup.php");' >> /var/www/wiki/LocalSettings.php<br /></pre><br /><br />And the result ? It doesn't work ! How exciting<br /><br />I keep getting errors like these:<br /><pre style="background-color: #EEEEEE; border: black 1px dashed; line-height: 100%; padding: 10px;"><br />[Tue Jul 22 15:59:58 2008] [error] [client 172.16.1.2] PHP Warning:  Missing argument 2 for OpenIDArticleViewHeader() in /usr/share/mediawiki/extensions/OpenID/OpenID.setup.php on line 168<br />[Tue Jul 22 15:59:58 2008] [error] [client 172.16.1.2] PHP Warning:  Missing argument 3 for OpenIDArticleViewHeader() in /usr/share/mediawiki/extensions/OpenID/OpenID.setup.php on line 168<br />[Tue Jul 22 15:59:58 2008] [error] [client 172.16.1.2] PHP Fatal error:  Call to undefined function wfLoadExtensionMessages() in /usr/share/mediawiki/extensions/OpenID/OpenID.setup.php on line 153<br /></pre>